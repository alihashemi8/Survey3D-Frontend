// src/utils/getAdvancedSummary.js

const roadmap = {
  ai: {
    faTitle: "ููุด ูุตููุน",
    why:
      "ุนูุงูู ู ููุงุฑุชโูุง ุดูุง ุฏุฑ ุฒููู ููุด ูุตููุนุ ุดูุง ุฑุง ุจุฑุง ูุฑูุฏ ุจู ุฏูุง ุงุฏฺฏุฑ ูุงุดูุ NLP ู ุจูุง ูุงุดู ุขูุงุฏู ูโฺฉูุฏ.",
    suggestion:
      "ุฏูุฑูโูุง ูพุดุฑูุชู ููุด ูุตููุนุ ูุดุงุฑฺฉุช ุฏุฑ ูพุฑูฺูโูุง ูุชูโุจุงุฒุ ู ููฺฉุงุฑ ุจุง ุชูโูุง ุชุญููุงุช ุฑุง ุขุบุงุฒ ฺฉูุฏ.",
    next:
      "ูุทุงูุนู ูพุงุชููุ TensorFlowุ PyTorchุ ู ุดุฑฺฉุช ุฏุฑ ฺุงูุดโูุง Kaggle ุชูุตู ูโุดูุฏ.",
    tools: ["Python", "TensorFlow", "PyTorch", "Kaggle", "Pandas"],
  },
  web: {
    faTitle: "ุชูุณุนู ูุจ",
    why:
      "ุชูุงู ู ุชุฌุฑุจู ุดูุง ุฏุฑ ุฒููู ุทุฑุงุญ ุณุงุชุ ุดูุง ุฑุง ุจู ฺฉ ุชูุณุนูโุฏููุฏู ูุจ ุญุฑููโุง ุชุจุฏู ูโฺฉูุฏ.",
    suggestion:
      "ูุฑูโูุฑฺฉโูุง ูุญุจูุจ ูุซู Reactุ Next.js ู ููุงุฑุชโูุง ุจฺฉโุงูุฏ (Node.js, Django) ุฑุง ุชููุช ฺฉูุฏ.",
    next: "ุฏุฑ ูพุฑูฺูโูุง ูุงูุน ู ูุฑููุณุฑ ูุดุงุฑฺฉุช ฺฉูุฏ ู ูููููโฺฉุงุฑ ุญุฑููโุง ุจุณุงุฒุฏ.",
    tools: ["HTML", "CSS", "JavaScript", "React", "Next.js", "Node.js"],
  },
  game: {
    faTitle: "ุชูุณุนู ุจุงุฒ",
    why:
      "ฺฏุฑุงุด ุดูุง ุจู ุจุงุฒโุณุงุฒ ูุดุงู ูโุฏูุฏ ฺฉู ุฎูุงูุช ู ุนูุงูู ุจู ุทุฑุงุญ ุชุนุงูู ุฏุงุฑุฏ.",
    suggestion:
      "Unreal Engine ุง Unity ุฑุง ุงุฏ ุจฺฏุฑุฏ ู ูพุฑูฺูโูุง ุณุงุฏูโ ุจุงุฒโุณุงุฒ ุฑุง ุดุฑูุน ฺฉูุฏ.",
    next: "ุฑู ุณุงุฎุช ุจุงุฒโูุง ฺฉูฺฺฉ ู ูพูุณุชู ุจู ุชูโูุง ูุณุชูู ุชูุฑฺฉุฒ ฺฉูุฏ.",
    tools: ["Unity", "C#", "Unreal", "Blender"],
  },
  app: {
    faTitle: "ุชูุณุนู ุงูพูฺฉุดู",
    why:
      "ุนูุงููโููุฏ ุดูุง ุจู ุณุงุฎุช ุงูพูฺฉุดูโูุงุ ูุณุฑ ุชูุณุนู ุงูพ ุฑุง ุจุฑุงุชุงู ููุงุณุจ ูโฺฉูุฏ.",
    suggestion:
      "ุงุฏฺฏุฑ Flutter ุง React Native ุฑุง ุดุฑูุน ฺฉุฑุฏู ู ุงูพโูุง ฺฉูฺฺฉ ุจุณุงุฒุฏ.",
    next: "ุงูพโูุง ุจุง ุญู ฺฉ ูุดฺฉู ูุงูุน ุทุฑุงุญ ู ุฏุฑ ูุงุฑฺฉุชโูุง ููุชุดุฑ ฺฉูุฏ.",
    tools: ["Flutter", "Dart", "React Native", "Firebase"],
  },
  hack: {
    faTitle: "ุงููุช ู ูฺฉ ุงุฎูุงู",
    why:
      "ฺฏุฑุงุด ุดูุง ุจู ุงููุช ุณุงุจุฑ ู ุชุญูู ุณุณุชูโูุง ูุณุฑ ูฺฉ ุงุฎูุงู ุฑุง ููุงุณุจ ูโุณุงุฒุฏ.",
    suggestion:
      "ุจุง ุดุจฺฉู ู ููุงูู ุงููู ุงููุช ุดุฑูุน ฺฉูุฏุ ุณูพุณ ูุงุฑุฏ ุฏูุง CEH ู ุงุจุฒุงุฑูุง ูพุดุฑูุชู ุดูุฏ.",
    next:
      "CTF ุญู ฺฉูุฏุ ุฏุฑ Hack The Box ุชูุฑู ฺฉูุฏ ู ูุฏุงุฑฺฉ OSCP ุง CEH ุฑุง ุฏุฑุงูุช ฺฉูุฏ.",
    tools: ["Linux", "Wireshark", "Metasploit", "Burp Suite", "Nmap"],
  },
};

export function getAdvancedSummary({
  mainPath,
  top3,
  priorityList,
  goalList,
  planList,
  details,
  scores = {},
}) {
  if (!mainPath || !roadmap[mainPath]) {
    return [
      {
        title: "โ ุฎุทุง ุฏุฑ ุชุญูู ูุณุฑ",
        content: "ูพุงุณุฎโูุง ุดูุง ุจู ุฏุฑุณุช ูพุฑุฏุงุฒุด ูุดุฏูุฏ. ูุทูุงู ูุฑู ุฑุง ุฏูุจุงุฑู ุจุฑุฑุณ ฺฉูุฏ.",
      },
    ];
  }

  const summary = [];

  // ูุณุฑ ุงุตู
  const main = roadmap[mainPath];
  summary.push({
    type: "mainPath",
    title: `๐ฏ ูุณุฑ ุงุตู ูพุดููุงุฏ: ${main.faTitle}`,
    content: main.why,
    suggestion: main.suggestion,
    next: main.next,
    tools: main.tools,
    score: scores[mainPath] || null,
  });

  // ูุณุฑูุง ุฌุงฺฏุฒู
  const altPaths = top3.filter((p) => p !== mainPath).slice(0, 2);
  altPaths.forEach((path) => {
    if (roadmap[path]) {
      summary.push({
        type: "altPath",
        title: `๐ ูุณุฑ ุฌุงฺฏุฒู: ${roadmap[path].faTitle}`,
        content: roadmap[path].why,
        suggestion: roadmap[path].suggestion,
        next: roadmap[path].next,
        tools: roadmap[path].tools,
        score: scores[path] || null,
      });
    }
  });

  // ุชุทุงุจู ุนูุงูู ู ููุงุฑุช
  if (details?.interestsMatched?.length && details?.skillsMatched?.length) {
    summary.push({
      type: "match",
      title: "๐ก ุชุทุงุจู ุนูุงููโูุง ู ููุงุฑุชโูุง ุดูุง:",
      content: `ุดูุง ุนูุงููโููุฏ ุจู ุญูุฒูโูุง ${details.interestsMatched.join("ุ ")} ูุณุชุฏ ู ููุงุฑุชโูุง ูุฑุชุจุท ${details.skillsMatched.join("ุ ")} ุฑุง ูุฒ ุฏุงุฑุฏ ฺฉู ุงู ููุทู ููุช ูุณุฑ ุดูุงุณุช.`,
    });
  }

  // ุฒุจุงูโูุง
  if (details?.languageMatch) {
    Object.entries(details.languageMatch).forEach(([key, langs]) => {
      if (langs.length > 0 && roadmap[key]) {
        summary.push({
          type: "language",
          title: `๐ง ุฒุจุงูโูุง ุจุฑูุงููโููุณ ููุฏ ุจุฑุง ูุณุฑ ${roadmap[key].faTitle}:`,
          content: `ุดูุง ุจุง ุฒุจุงูโูุง ${langs.join("ุ ")} ุขุดูุง ูุณุชุฏ ฺฉู ุฏุฑ ูุณุฑ ${roadmap[key].faTitle} ุจุณุงุฑ ฺฉุงุฑุจุฑุฏ ูุณุชูุฏ.`,
        });
      }
    });
  }

  // ูุดุฏุงุฑูุง / ุชุถุงุฏูุง
  if (details?.conflicts?.length > 0) {
    summary.push({
      type: "conflict",
      title: "โ๏ธ ูฺฉุงุช ููู ู ูุดุฏุงุฑูุง:",
      content: details.conflicts.join(" "),
    });
  }

  // ุงูููุชโูุง
  if (priorityList?.length > 0) {
    summary.push({
      type: "priority",
      title: "๐ ุงูููุชโูุง ุดูุง:",
      content: `ุจุฑุงุณุงุณ ุงูููุชโูุง ูุดุฎุตโุดุฏู (${priorityList.join("ุ ")})ุ ูุณุฑ ุงูุชุฎุงุจ ุจุง ุดุฑุงุท ุดูุง ุณุงุฒฺฏุงุฑ ุฏุงุฑุฏ.`,
    });
  }

  // ุงูุฏุงู ุดุฎุต
  if (goalList?.length > 0) {
    if (goalList.includes("ูุฑููุณุฑ")) {
      summary.push({
        type: "goal",
        title: "๐งโ๐ป ุนูุงูู ุจู ูุฑููุณุฑ:",
        content: "ูุณุฑูุง ูุซู Web ุง App ุจุง ุชูุฑฺฉุฒ ุจุฑ ุจุงุฒุงุฑ ุจูโุงูููู ุจุฑุง ุดูุง ููุงุณุจโุชุฑ ุงุณุช.",
      });
    }
    if (goalList.includes("ูพฺููุด") || goalList.includes("ุงุฏุงูู ุชุญุตู")) {
      summary.push({
        type: "goal",
        title: "๐ ฺฏุฑุงุด ุจู ูพฺููุด ุง ุงุฏุงูู ุชุญุตู:",
        content: "ูุณุฑูุง ูุซู AI ุง Game ูุฑุตุชโูุง ุฎูุจ ุจุฑุง ุงุฏุงูู ุชุญุตู ูุฑุงูู ูโฺฉููุฏ.",
      });
    }
    if (goalList.includes("ุงุณุชุงุฑุชุงูพ")) {
      summary.push({
        type: "goal",
        title: "๐ ุนูุงูู ุจู ุฑุงูโุงูุฏุงุฒ ุงุณุชุงุฑุชุงูพ:",
        content: "ุงุฏฺฏุฑ ฺูุฏููุงุฑุช ู ูุฏุฑุช ูพุฑูฺู ูโุชูุงูุฏ ุดูุง ุฑุง ุฏุฑ ูุณุฑ ุงุณุชุงุฑุชุงูพ ูููู ฺฉูุฏ.",
      });
    }
  }

  // ุจุฑูุงููโูุง
  if (planList?.length > 0) {
    if (planList.includes("ุงุฏุงูู ุชุญุตู ุฏุฑ ุฎุงุฑุฌ ุงุฒ ฺฉุดูุฑ") || planList.includes("ฺฉุงุฑ ู ุงุฏุงูู ุชุญุตู ุฏุฑ ุฎุงุฑุฌ")) {
      summary.push({
        type: "plan",
        title: "๐ ููุงุฌุฑุช ุง ุชุญุตู ุฎุงุฑุฌ:",
        content: "ุจุฑุง ููุงุฌุฑุช ู ุงุฏุงูู ุชุญุตู ุฏุฑ ุฎุงุฑุฌุ ููุงุฑุช ุฒุจุงู ู ูุฏุฑฺฉโูุง ุจูโุงูููู ุงููุช ุฏุงุฑุฏ.",
      });
    }
    if (planList.includes("ูุฑูุฏ ุณุฑุน ุจู ุจุงุฒุงุฑ ฺฉุงุฑ") || planList.includes("ฺฉุงุฑ ู ุงุฏุงูู ุชุญุตู ุฏุฑ ุงุฑุงู")) {
      summary.push({
        type: "plan",
        title: "๐ฎ๐ท ุชูุฑฺฉุฒ ุจุฑ ุจุงุฒุงุฑ ุงุฑุงู:",
        content: "ุชูุฑฺฉุฒ ุจุฑ ูพุฑูฺูโูุง ูุงูุน ู ุดุจฺฉูโุณุงุฒ ูุญู ูโุชูุงูุฏ ุณุฑุนโุชุฑ ุดูุง ุฑุง ูุงุฑุฏ ุจุงุฒุงุฑ ฺฉูุฏ.",
      });
    }
  }

  return summary;
}
